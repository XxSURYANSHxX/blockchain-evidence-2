<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Health & Status - EVID-DGC</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="system-health.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <nav class="dashboard-nav">
        <div class="container">
            <div class="nav-content">
                <div class="nav-items">
                    <a href="admin.html" class="nav-brand">
                        <i data-lucide="shield" class="brand-icon"></i>
                        EVID-DGC Admin
                    </a>
                    <span class="nav-separator">|</span>
                    <span class="nav-title">System Health & Status</span>
                </div>
                <div class="nav-items">
                    <div class="user">
                        <div class="user-role">
                            <i data-lucide="shield-check"></i>
                            <span>Administrator</span>
                        </div>
                        <div class="user-wallet" id="currentWallet">Loading...</div>
                    </div>
                    <button class="btn btn-outline btn-sm" onclick="window.location.href='admin.html'">
                        <i data-lucide="arrow-left"></i>
                        Back to Admin
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard-hero">
            <h1>System Health & Status Dashboard</h1>
            <p>Real-time monitoring of all system components and services</p>
        </div>

        <!-- Auto-refresh controls -->
        <div class="refresh-controls">
            <div class="refresh-status">
                <span id="lastUpdated">Last updated: Never</span>
                <span class="refresh-indicator" id="refreshIndicator">
                    <i data-lucide="clock"></i>
                    Auto-refresh: <span id="refreshCountdown">60</span>s
                </span>
            </div>
            <div class="refresh-actions">
                <button class="btn btn-sm" id="refreshNow">
                    <i data-lucide="refresh-cw"></i>
                    Refresh Now
                </button>
                <button class="btn btn-outline btn-sm" id="toggleAutoRefresh">
                    <i data-lucide="pause"></i>
                    Pause Auto-refresh
                </button>
            </div>
        </div>

        <!-- Overall System Status -->
        <div class="status-overview">
            <div class="status-card overall-status" id="overallStatus">
                <div class="status-icon">
                    <i data-lucide="activity"></i>
                </div>
                <div class="status-info">
                    <h3>System Status</h3>
                    <div class="status-value" id="overallStatusValue">Checking...</div>
                    <div class="status-description" id="overallStatusDesc">Initializing system checks...</div>
                </div>
            </div>
        </div>

        <!-- Component Status Grid -->
        <div class="status-grid">
            <!-- Blockchain Status -->
            <div class="status-card" id="blockchainStatus">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="link"></i>
                    </div>
                    <h3>Blockchain Status</h3>
                    <div class="status-indicator" id="blockchainIndicator">
                        <div class="status-dot checking"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Network:</span>
                        <span id="networkName">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Chain ID:</span>
                        <span id="chainId">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Last Block:</span>
                        <span id="lastBlock">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Last Transaction:</span>
                        <span id="lastTransaction">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Contract Address:</span>
                        <span id="contractAddress" class="monospace">-</span>
                    </div>
                </div>
            </div>

            <!-- Database Status -->
            <div class="status-card" id="databaseStatus">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="database"></i>
                    </div>
                    <h3>Database Status</h3>
                    <div class="status-indicator" id="databaseIndicator">
                        <div class="status-dot checking"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Connection:</span>
                        <span id="dbConnection">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Last Query:</span>
                        <span id="lastQuery">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Response Time:</span>
                        <span id="dbResponseTime">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Active Connections:</span>
                        <span id="activeConnections">-</span>
                    </div>
                </div>
            </div>

            <!-- Storage Status -->
            <div class="status-card" id="storageStatus">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="hard-drive"></i>
                    </div>
                    <h3>Storage Status</h3>
                    <div class="status-indicator" id="storageIndicator">
                        <div class="status-dot checking"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Provider:</span>
                        <span id="storageProvider">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Last Upload:</span>
                        <span id="lastUpload">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Storage Used:</span>
                        <span id="storageUsed">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Available Space:</span>
                        <span id="availableSpace">-</span>
                    </div>
                </div>
            </div>

            <!-- API Status -->
            <div class="status-card" id="apiStatus">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="server"></i>
                    </div>
                    <h3>API Status</h3>
                    <div class="status-indicator" id="apiIndicator">
                        <div class="status-dot checking"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Server Status:</span>
                        <span id="serverStatus">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Response Time:</span>
                        <span id="apiResponseTime">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Uptime:</span>
                        <span id="serverUptime">-</span>
                    </div>
                    <div class="detail-item">
                        <span>Active Sessions:</span>
                        <span id="activeSessions">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Metrics -->
        <div class="metrics-section">
            <h2>System Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-header">
                        <i data-lucide="trending-up"></i>
                        <h4>Uptime Statistics</h4>
                    </div>
                    <div class="metric-content">
                        <div class="uptime-stats">
                            <div class="uptime-item">
                                <span class="uptime-period">Last 24h</span>
                                <span class="uptime-value" id="uptime24h">-</span>
                            </div>
                            <div class="uptime-item">
                                <span class="uptime-period">Last 7 days</span>
                                <span class="uptime-value" id="uptime7d">-</span>
                            </div>
                            <div class="uptime-item">
                                <span class="uptime-period">Last 30 days</span>
                                <span class="uptime-value" id="uptime30d">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <i data-lucide="activity"></i>
                        <h4>Performance Metrics</h4>
                    </div>
                    <div class="metric-content">
                        <div class="performance-stats">
                            <div class="perf-item">
                                <span>Avg Response Time</span>
                                <span id="avgResponseTime">-</span>
                            </div>
                            <div class="perf-item">
                                <span>Requests/min</span>
                                <span id="requestsPerMin">-</span>
                            </div>
                            <div class="perf-item">
                                <span>Error Rate</span>
                                <span id="errorRate">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Errors -->
        <div class="errors-section">
            <h2>Recent System Events</h2>
            <div class="events-container">
                <div class="events-tabs">
                    <button class="tab-btn active" data-tab="errors">
                        <i data-lucide="alert-triangle"></i>
                        Errors & Warnings
                    </button>
                    <button class="tab-btn" data-tab="activities">
                        <i data-lucide="activity"></i>
                        System Activities
                    </button>
                </div>
                
                <div class="tab-content active" id="errorsTab">
                    <div class="events-list" id="errorsList">
                        <div class="loading-placeholder">
                            <i data-lucide="loader"></i>
                            Loading recent errors...
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="activitiesTab">
                    <div class="events-list" id="activitiesList">
                        <div class="loading-placeholder">
                            <i data-lucide="loader"></i>
                            Loading system activities...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Actions -->
        <div class="actions-section">
            <h2>System Actions</h2>
            <div class="actions-grid">
                <button class="action-btn" id="clearCacheBtn">
                    <i data-lucide="trash-2"></i>
                    <span>Clear System Cache</span>
                </button>
                <button class="action-btn" id="restartServicesBtn">
                    <i data-lucide="rotate-cw"></i>
                    <span>Restart Services</span>
                </button>
                <button class="action-btn" id="exportLogsBtn">
                    <i data-lucide="download"></i>
                    <span>Export System Logs</span>
                </button>
                <button class="action-btn" id="runDiagnosticsBtn">
                    <i data-lucide="stethoscope"></i>
                    <span>Run Diagnostics</span>
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="system-health.js"></script>
</body>
</html>